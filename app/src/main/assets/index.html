<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
  	/* styles. css */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background-color: #ededed;
}

/* Menu Styles */
.menu {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 100vh;
  text-align: center;
}

.menu button {
  padding: 1rem 2rem;
  font-size: 1.2rem;
  margin-bottom: 1rem;
  background-color: #4CAF50; /* Green */
  border: none;
  color: white;
  text-decoration: none;
  cursor: pointer;
}

/* Chat Interface Styles */
.chat-container {
  display: flex;
  height: 100vh;
}

.sidebar {
  width: 30%;
  background-color: #fff;
  border-right: 1px solid #ddd;
  overflow-y: auto;
}

.menu-button-container {
  text-align: center;
  padding: 1rem 0;
}

#show-menu-button {
  padding: 0.5rem 1rem;
  font-size: 1rem;
  border: none;
  background-color: #eee;
  cursor: pointer;
}

.main {
  width: 70%;
  display: flex;
  flex-direction: column;
  height: 100%;
}

.chat-header, .chat-footer {
  background-color: #f9f9f9;
  padding: 1rem;
  border-top: 1px solid #ddd;
  border-bottom: 1px solid #ddd;
}

.chat-body {
  flex-grow: 1;
  overflow-y: auto;
  padding: 1rem;
}

.user-profile, .contact-profile {
  display: flex;
  align-items: center;
  padding: 1rem;
  border-bottom: 1px solid #ddd;
}

.profile-picture {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  object-fit: cover;
  margin-right: 1rem;
}

.user-name, .contact-name {
  font-size: 1.1rem;
  font-weight: bold;
  margin-bottom: 0.25rem;
}

.user-status, .contact-status {
  font-size: 0.8rem;
  color: #888;
}

.message-container {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.message-form {
  display: flex;
  width: 100%;
}

.message-input {
  flex-grow: 1;
  padding: 0.5rem;
  font-size: 1rem;
  border: 1px solid #ddd;
  border-radius: 2rem 0 0 2rem;
  outline: none;
}

.send-button {
  background-color: #4caf50;
  color: #fff;
  padding: 0.5rem 1rem;
  font-size: 1rem;
  border: none;
  border-radius: 0 2rem 2rem 0;
  cursor: pointer;
}

.message {
  padding: 0.5rem;
  border-radius: 0.5rem;
  max-width: 70%;
  margin-bottom: 0.5rem;
  position: relative;
}

.message.me {
  background-color: #dcf8c6;
  align-self: flex-end;
  margin-left: auto;
}

.message.contact {
  background-color: #fff;
  align-self: flex-start;
}

.message .message-content {
  margin-bottom: 0.25rem;
  word-break: break-word;
}

.message .message-timestamp {
  font-size: 0.8rem;
  color: #888;
  position: absolute;
  bottom: 5px;  /* Adjust vertical position as needed */
  right: 10px;   /* Adjust horizontal position as needed */
  /* Remove margin-right */ 
}
.message.me .message-content {
  margin-bottom: 15px; /* Add space below message content */
}

.message.contact .message-timestamp {
  margin-bottom: -20px;
}

/* Responsive Design */
@media (max-width: 768px) {
  .chat-container {
    flex-direction: column;
    height: 100%;
  }

  .sidebar,
  .main {
    width: 100%;
  }

  .chat-header,
  .chat-footer {
    padding: 0.5rem;
  }
}
</style>
  <title>Chat App</title>
</head>
<body>
  <div class="menu">
    <h1>Choose Chat Mode:</h1>
    <button id="chatbot1">Chat with Bot 1</button>
    <button id="chatbot2">Chat with Calculator Bot</button>
  </div>

  <div class="chat-container" style="display: none;">
    <div class="sidebar">
      <div class="user-profile">
        <img src="your-profile-image.jpg" alt="Profile" class="profile-picture">
        <div class="user-details">
          <h3 class="user-name">BASA</h3>
          <p class="user-status">Online</p>
        </div>
      </div>

      <div class="menu-button-container">
        <button id="show-menu-button">Menu</button>
      </div>
    </div>

    <div class="main">
      <div class="chat-header">
        <div class="contact-profile">
          <img src="contact-profile-image.jpg" alt="Contact Profile" class="profile-picture">
          <div class="contact-details">
            <h3 class="contact-name">Chat Bot</h3>
            <p class="contact-status">Online</p>
          </div>
        </div>
      </div>

      <div class="chat-body">
        <div class="message-container">
          <!-- Messages will be added here -->
        </div>
      </div>

      <div class="chat-footer">
        <form class="message-form"> 
          <input type="text" placeholder="Type a message" class="message-input">
          <button type="submit" class="send-button">Send</button>
        </form>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.js"></script>
  <script>
const chatContainer = document.querySelector('.chat-container');
const menu = document.querySelector('.menu');
const chatbot1Button = document.getElementById('chatbot1');
const chatbot2Button = document.getElementById('chatbot2');
const showMenuButton = document.getElementById('show-menu-button');

let activeChatbot = null;

// Sample chat data for Bot 1
const sampleChats1 = [
  { sender: 'me', content: 'Hi', timestamp: new Date('2023-04-18T10:00:00') },
  { sender: 'contact', content: 'Hello there!', timestamp: new Date('2023-04-18T10:01:00') },
];

// Emotion arrays
const happy = ["üòÑ", "üòÅ", "üòä", "üòÉ", ":)", ":D", "XD", "<3"];
const sad = ["üòî", "üò¢", "üò≠", "üò•", ":(", ":'(", ";(", "D:"];
const angry = ["üò°", "üò†", "ü§¨", "üò§", ">:(", "(-_-Ôæí)", "üò†"]; 
const confuse = ["üòï", "ü§î", "ü§®", ":/", ":S", "-_-"]; 
const hate = ["üò†", "üò°", "ü§¨", "üëø", ">:O", "(‚ïØ¬∞‚ñ°¬∞Ôºâ‚ïØÔ∏µ ‚îª‚îÅ‚îª"]; 

// Function to get a random emoji with weighted probability
function getRandomEmoji(emotionArray, increaseProbabilityBy = 0) {
  // Increase probability for the target emotion
  const weightedArray = [
    ...emotionArray,
    ...Array(increaseProbabilityBy).fill(emotionArray[0])
  ];

  const randomIndex = Math.floor(Math.random() * weightedArray.length);
  return weightedArray[randomIndex];
}

// Function to get bot's response with emoji
function getBotResponse(userInput) {
  userInput = userInput.toLowerCase();

  // Define chat pairs with responses and associated emotion arrays
  const pairs = [
    [/^(Hi|Hello|Hey|Howdy|Greetings)$/i, ["Hello!", "Hi there!", "Hey hey!", "Howdy partner!", "Greetings to you too!", happy]],
    [/^How are you\??$/i, ["I'm doing well, thanks!", "Not bad, how about you?", "I'm a chatbot, but I'm feeling positive!", "I'm fantastic, thanks for asking!", happy]],
    [/^(Bye|Goodbye|See ya|Later|Ciao)$/i, ["See you later!", "Goodbye!", "Talk to you soon!", "Have a great day!", "Ciao for now!", happy]],
    [/^(hate|dislike|detest|abhor|loathe)$/i, ["I try to be neutral, but those are strong words.", "Let's focus on positive things.", "I understand you're feeling negative.", "Everyone's entitled to their opinion, even if it's negative.", hate]],
    [/^(confused\??|huh\??|what\??|don't understand)$/i, ["I'm a bit confused too.", "Can you explain it in another way?", "Let me see if I understand.", "Could you rephrase that?", confuse]],
    [/^(sad|unhappy|down|depressed|bummed)$/i, ["I'm sorry to hear you're feeling that way.", "Is there anything I can do to help?", "It's okay to feel sad sometimes.", "I'm here to listen if you want to talk.", sad]],
    [/^(good|great|awesome|fantastic|excellent|wonderful|terrific|marvelous|superb)$/i, ["That's great to hear!", "I'm happy for you!", "Keep up the good work!", happy]],
    [/^(bad|terrible|awful|horrible|dreadful)$/i, ["I'm sorry to hear that.", "That sounds really tough.", "Is there anything I can do to help?", sad]],
    [/^(tired|exhausted|worn out|beat)$/i, ["Get some rest!", "You deserve a break.", "Maybe a nap would help?", sad]],
    [/^(excited|thrilled|pumped|stoked)$/i, ["That's awesome!", "I'm excited for you!", "Tell me more!", happy]],
    [/^(bored|uninterested|dull)$/i, ["Maybe we can find something fun to talk about?", "What are you interested in?", "I'm here to entertain you!", confuse]],
    [/^(hungry|starving|famished)$/i, ["Go grab a bite to eat!", "I'm hungry just thinking about it!", "What's your favorite food?", happy]],
    [/^(thirsty|parched|dehydrated)$/i, ["Go get a drink!", "Water is always a good choice.", "Stay hydrated!", happy]],
    [/^(love|adore|cherish)$/i, ["That's so sweet!", "Love is a beautiful thing.", "<3", happy]],
    [/^(happy birthday)$/i, ["Happy birthday!", "Wishing you all the best!", "May your day be filled with joy!", happy]],
    [/^(thank you|thanks|thx)$/i, ["You're welcome!", "No problem!", "Anytime!", happy]],
    [/^(please|plz)$/i, ["Sure thing!", "Happy to help!", "Of course!", happy]],
    [/^(yes|yeah|yep|sure|okay|ok)$/i, ["Great!", "Sounds good!", "Let's do it!", happy]],
    [/^(no|nope|nah|not really)$/i, ["Okay, no problem.", "Maybe another time?", "I understand.", sad]],
    [/^(maybe|perhaps|possibly)$/i, ["It's up to you!", "No pressure.", "Let me know when you decide.", confuse]],
    [/^(what's your name\??|who are you\??)$/i, ["I'm a friendly chatbot!", "You can call me Botty.", "I'm here to chat and have fun!", happy]],
    // ... add 170 more similar pairs ... 
];

  // Check for pattern matches and add corresponding emoji
  for (const [pattern, responsesAndEmoji] of pairs) {
    if (pattern.test(userInput)) {
      const responses = responsesAndEmoji.slice(0, -1);
      const emotionArray = responsesAndEmoji[responsesAndEmoji.length - 1];

      const randomResponseIndex = Math.floor(Math.random() * responses.length);

      let randomEmoji;
      if (emotionArray === happy) {
        randomEmoji = getRandomEmoji(emotionArray, 10); // 10% higher chance
      } else if (emotionArray === angry || emotionArray === sad || emotionArray === confuse) {
        randomEmoji = getRandomEmoji(emotionArray, 5); // 5% higher chance
      } else {
        randomEmoji = getRandomEmoji(emotionArray); // Default probability
      }

      return responses[randomResponseIndex] + " " + randomEmoji;
    }
  }

  // Default response if no match
  return "Interesting. Tell me more!";
}

function formatTimestamp(timestamp) {
  return timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
}

function renderMessages(messages) {
  const messageContainer = document.querySelector('.message-container');
  messageContainer.innerHTML = '';

  messages.forEach(message => {
    const messageElement = document.createElement('div');
    messageElement.classList.add('message', message.sender);
    messageElement.innerHTML = `
      <p class="message-content">${message.content}</p>
      <span class="message-timestamp">${formatTimestamp(message.timestamp)}</span>
    `;
    messageContainer.appendChild(messageElement);
  });

  messageContainer.scrollTop = messageContainer.scrollHeight;
}

function addNewMessage(sender, content) {
  const newMessage = { sender, content, timestamp: new Date() };
  sampleChats1.push(newMessage);
  renderMessages(sampleChats1);

  if (sender === 'me') {
    if (activeChatbot === 'chatbot1') {
      let response = getBotResponse(content);
      if (response) {
        setTimeout(() => addNewMessage('contact', response), 1000);
      }
    } else if (activeChatbot === 'chatbot2') {
      let response = calculate(content);
      if (response) {
        setTimeout(() => addNewMessage('contact', response), 1000);
      }
    }
  }
}

function calculate(expression) {
  try {
    const result = math.evaluate(expression);
    return `${result}`;
  } catch (error) {
    return "Invalid expression. Please try again.";
  }
}


// Event listeners for chatbot selection
chatbot1Button.addEventListener('click', () => {
  activeChatbot = 'chatbot1';
  menu.style.display = 'none';
  chatContainer.style.display = 'flex';
  renderMessages(sampleChats1);
});

chatbot2Button.addEventListener('click', () => {
  activeChatbot = 'chatbot2';
  menu.style.display = 'none';
  chatContainer.style.display = 'flex';
  renderMessages([]); // Start with an empty chat history
});

// Event listener for showing the menu
showMenuButton.addEventListener('click', () => {
  menu.style.display = 'block';
  chatContainer.style.display = 'none';
});

// Event listener for sending messages
const messageForm = document.querySelector('.message-form');
messageForm.addEventListener('submit', (event) => {
  event.preventDefault();
  const messageInput = document.querySelector('.message-input');
  const messageContent = messageInput.value.trim();
  if (messageContent) {
    addNewMessage('me', messageContent);
    messageInput.value = '';
  }
});
</script>
</body>
</html>